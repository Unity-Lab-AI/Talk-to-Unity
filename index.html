<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Unity Voice Lab â€“ System Check</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;600;700&family=Roboto+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
    />
    <script>
        (function () {
            try {
                var path = window.location.pathname || '';
                if (!path.endsWith('/')) {
                    var lastSegment = path.substring(path.lastIndexOf('/') + 1);
                    if (lastSegment && lastSegment.indexOf('.') === -1) {
                        var search = window.location.search || '';
                        var hash = window.location.hash || '';
                        var destination = path + '/' + search + hash;
                        window.location.replace(destination);
                    }
                }
            } catch (error) {
                console.warn('Failed to normalize trailing slash for assets:', error);
            }
        })();
    </script>
    <script>
        (function loadTalkToUnityAssets() {
            const VERSION = '20240606';

            function normalizeBasePath() {
                try {
                    const url = new URL(window.location.href);
                    let { pathname } = url;

                    if (!pathname.endsWith('/')) {
                        const lastSegment = pathname.substring(pathname.lastIndexOf('/') + 1);
                        if (!lastSegment || lastSegment.indexOf('.') === -1) {
                            pathname += '/';
                        } else {
                            pathname = pathname.substring(0, pathname.lastIndexOf('/') + 1);
                        }
                    }

                    return `${url.origin}${pathname}`;
                } catch (error) {
                    console.warn('Unable to determine asset base path, falling back to relative paths.', error);
                    return '';
                }
            }

            function ensureTrailingSlash(value) {
                if (typeof value !== 'string' || !value) {
                    return '';
                }
                return value.endsWith('/') ? value : `${value}/`;
            }

            const inferredBase = ensureTrailingSlash(normalizeBasePath());
            const assetBase = ensureTrailingSlash(
                typeof window.__talkToUnityAssetBase === 'string' && window.__talkToUnityAssetBase
                    ? window.__talkToUnityAssetBase
                    : inferredBase
            );

            window.__talkToUnityAssetBase = assetBase;
            if (!window.__talkToUnityAssetVersion) {
                window.__talkToUnityAssetVersion = VERSION;
            }

            function resolveAsset(path) {
                try {
                    return new URL(path, assetBase || window.location.href).toString();
                } catch (error) {
                    console.warn('Falling back to relative asset path for', path, error);
                    return path;
                }
            }

            function appendStylesheet(path) {
                const link = document.createElement('link');
                link.rel = 'stylesheet';
                link.href = resolveAsset(path);
                document.head.appendChild(link);
            }

            function appendScript(path) {
                const script = document.createElement('script');
                script.defer = true;
                script.src = resolveAsset(path);
                document.head.appendChild(script);
            }

            appendStylesheet(`style.css?v=${VERSION}`);
            appendScript(`landing.js?v=${VERSION}`);
        })();
    </script>
    <noscript>
        <link rel="stylesheet" href="./style.css?v=20240606" />
    </noscript>
</head>
<body class="no-js" data-app-state="landing">
    <noscript>
        <div class="no-js-banner" role="alert">
            <strong>JavaScript is disabled.</strong>
            The live Unity assistant requires JavaScript, so the static preview is shown instead.
        </div>
    </noscript>

    <section id="landing" class="landing" aria-labelledby="landing-title">
        <div class="landing-grid">
            <div class="landing-hero surface-card accent-card">
                <span class="landing-badge">Unity voice lab</span>
                <h1 id="landing-title">Talk to Unity</h1>
                <p class="landing-lede">
                    This is an experimental voice interface for Unity. You can talk to Unity and it will respond to you.
                </p>
                <div class="landing-links">
                    <a class="landing-link" href="https://unityailab.online" target="_blank" rel="noopener">Back to Unity AI Lab home</a>
                    <a class="landing-link" href="https://github.com/Unity-Lab-AI/Talk-to-Unity" target="_blank" rel="noopener">View the project on GitHub</a>
                </div>
            </div>

            <div class="landing-overview surface-card">
                 <div id="status-message" class="landing-status" role="status" aria-live="polite"></div>

                <div class="landing-body">
                    <div class="dependency-summary">
                        <span
                            class="dependency-light"
                            data-role="dependency-light"
                            data-state="pending"
                            aria-live="polite"
                            aria-label="Checking requirements"
                        ></span>
                        <div class="dependency-summary-text">
                            <h2>Ready to talk?</h2>
                            <p id="dependency-summary">
                                Click the button below to start talking to Unity.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="landing-actions surface-card action-bar">
            <a id="launch-app" class="primary" href="/ai">Talk to Unity</a>
        </div>
    </section>
</body>
</html>
