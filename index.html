<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unity Voice Chat</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">
    <script defer src="./app.js"></script>
</head>

<body class="no-js" data-app-state="landing">
    <noscript>
        <div class="no-js-banner" role="alert">
            <strong>JavaScript is disabled.</strong>
            The live Unity assistant requires JavaScript, so the static preview is shown instead.
        </div>
    </noscript>

    <section id="landing" class="landing" aria-labelledby="landing-title">
        <div class="landing-hero">
            <span class="landing-badge">Unity voice lab check-in</span>
            <h1 id="landing-title">Let’s make sure every light is green</h1>
            <p class="landing-lede">
                Before Unity can chat with you, we run a quick safety check on your browser.
                Think of it like making sure your helmet is on straight. When a light turns red, read the friendly tip and fix it, then press “Check again.”
            </p>
            <div class="landing-links">
                <a class="landing-link" href="https://unityailab.online" target="_blank" rel="noopener">Back to Unity AI Lab home</a>
                <a class="landing-link" href="https://github.com/Unity-Lab-AI/Talk-to-Unity" target="_blank" rel="noopener">View the project on GitHub</a>
            </div>
        </div>

        <div class="landing-body">
            <div class="dependency-summary">
                <span
                    class="dependency-light"
                    data-role="dependency-light"
                    data-state="pending"
                    aria-live="polite"
                    aria-label="Checking requirements"
                ></span>
                <div class="dependency-summary-text">
                    <h2>What the lights mean</h2>
                    <p id="dependency-summary">
                        We’re checking right now. Green means your setup is ready. A red light means we need to fix that part together before Unity can listen.
                    </p>
                </div>
            </div>

            <ul id="dependency-list" class="dependency-list">
                <li class="dependency-item" data-dependency="secure-context" data-state="pending">
                    <div class="dependency-header">
                        <span class="dependency-name">Secure connection (HTTPS or localhost)</span>
                        <span class="dependency-status">Checking…</span>
                    </div>
                    <p class="dependency-instructions">
                        If this light is red: look at the address bar at the top. The link should start with <code>https://</code> or say <code>localhost</code>.
                        If it doesn’t, add the missing <code>https://</code> or open the site from our secure Unity AI Lab page. It’s just like buckling a seatbelt so everything stays safe.
                    </p>
                    <p class="dependency-reminder">After you fix it, press the big “Check again” button.</p>
                </li>
                <li class="dependency-item" data-dependency="speech-recognition" data-state="pending">
                    <div class="dependency-header">
                        <span class="dependency-name">Web Speech Recognition API</span>
                        <span class="dependency-status">Checking…</span>
                    </div>
                    <p class="dependency-instructions">
                        If this light is red: your browser can’t hear you yet. Open this page in the latest version of Google Chrome, Microsoft Edge, or another browser that supports talking and listening.
                        Imagine switching to a friend who knows how to play the game.
                    </p>
                    <p class="dependency-reminder">Switch browsers or update yours, then press “Check again.”</p>
                </li>
                <li class="dependency-item" data-dependency="speech-synthesis" data-state="pending">
                    <div class="dependency-header">
                        <span class="dependency-name">Speech synthesis voices</span>
                        <span class="dependency-status">Checking…</span>
                    </div>
                    <p class="dependency-instructions">
                        If this light is red: the browser doesn’t know how to speak back. Make sure your speakers aren’t muted and that you’re using a browser with voice support (Chrome, Edge, or Safari on desktop works best).
                        Refresh the page after turning the sound on.
                    </p>
                    <p class="dependency-reminder">When you’re ready, press “Check again” to retry.</p>
                </li>
                <li class="dependency-item" data-dependency="microphone" data-state="pending">
                    <div class="dependency-header">
                        <span class="dependency-name">Microphone access</span>
                        <span class="dependency-status">Checking…</span>
                    </div>
                    <p class="dependency-instructions">
                        If this light is red: the browser needs permission to hear you. Look for a pop-up asking to use your microphone and click “Allow.”
                        If you missed it, click the lock icon in the address bar and enable the microphone. It’s like giving a friend permission to listen to your story.
                    </p>
                    <p class="dependency-reminder">Press “Check again” after allowing the microphone.</p>
                </li>
            </ul>
        </div>

        <div class="landing-actions">
            <button id="launch-app" class="primary" type="button" disabled aria-disabled="true">Launch Unity Voice Lab</button>
            <button id="recheck-dependencies" class="ghost" type="button">Check again</button>
        </div>
    </section>

    <div id="app-root" hidden>
        <div class="app-shell">
            <header class="status-banner" role="status" aria-live="polite">
                <button id="mute-indicator" class="mute-indicator" data-state="muted" type="button">
                    <span class="indicator-text">Tap or click anywhere to unmute</span>
                </button>
            </header>
            <main class="layout" aria-live="polite">
                <figure id="hero-stage" class="image-stage" data-state="empty" aria-hidden="true">
                    <img id="hero-image" alt="" loading="lazy" decoding="async" />
                </figure>
                <section class="voice-stage" role="group" aria-label="Voice activity monitors">
                    <article class="voice-circle ai" data-role="ai" aria-label="Unity is idle">
                        <div class="pulse-ring"></div>
                        <span class="sr-only">Unity</span>
                    </article>
                    <article class="voice-circle user" data-role="user" aria-label="Microphone is muted">
                        <div class="pulse-ring"></div>
                        <span class="sr-only">You</span>
                    </article>
                </section>
            </main>
        </div>
    </div>
</body>
</html>
