(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const tr="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(tr);let He=!1,nr=!1;function rr(){He=!0}rr();const ir=1,sr=2,ar=16,or=2,lr=4,cr=8,ur=1,fr=2,L=Symbol(),dr="http://www.w3.org/1999/xhtml",vn=!1;var gn=Array.isArray,hr=Array.prototype.indexOf,mn=Array.from,_n=Object.defineProperty,dt=Object.getOwnPropertyDescriptor,yn=Object.getOwnPropertyDescriptors,pr=Object.prototype,vr=Array.prototype,Ht=Object.getPrototypeOf;const me=()=>{};function gr(e){return e()}function ht(e){for(var t=0;t<e.length;t++)e[t]()}function wn(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}const F=2,bn=4,Et=8,le=16,ce=32,je=64,jt=128,P=1024,$=2048,ne=4096,q=8192,se=16384,qt=32768,Xe=65536,nn=1<<17,mr=1<<18,Tt=1<<19,kn=1<<20,W=256,pt=512,vt=32768,Lt=1<<21,Vt=1<<22,Se=1<<23,Ne=Symbol("$state"),_r=Symbol("legacy props"),yr=Symbol(""),Le=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function wr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function br(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function kr(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Sr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Er(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Tr(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function xr(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Mr(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ir(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ar(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Rr=!1;function Sn(e){return e===this.v}function En(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Tn(e){return!En(e,this.v)}let x=null;function gt(e){x=e}function qe(e,t=!1,n){x={p:x,i:!1,c:null,e:null,s:e,x:null,l:He&&!t?{s:null,u:null,$:[]}:null}}function Ve(e){var t=x,n=t.e;if(n!==null){t.e=null;for(var r of n)On(r)}return t.i=!0,x=t.p,{}}function rt(){return!He||x!==null&&x.l===null}let Oe=[];function Cr(){var e=Oe;Oe=[],ht(e)}function xn(e){if(Oe.length===0){var t=Oe;queueMicrotask(()=>{t===Oe&&Cr()})}Oe.push(e)}function Pr(e){var t=b;if(t===null)return w.f|=Se,e;if((t.f&qt)===0){if((t.f&jt)===0)throw e;t.b.error(e)}else mt(e,t)}function mt(e,t){for(;t!==null;){if((t.f&jt)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const ct=new Set;let I=null,Y=null,pe=[],Bt=null,Ot=!1;class Je{committed=!1;current=new Map;previous=new Map;#t=new Set;#n=new Set;#e=0;#r=0;#s=null;#a=[];#o=[];skipped_effects=new Set;is_fork=!1;process(t){pe=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#l(r,n);this.is_fork||this.#c(),this.#r>0||this.is_fork?(this.#i(n.effects),this.#i(n.render_effects),this.#i(n.block_effects)):(I=null,rn(n.render_effects),rn(n.effects),this.#s?.resolve()),Y=null}#l(t,n){t.f^=P;for(var r=t.first;r!==null;){var i=r.f,s=(i&(ce|je))!==0,a=s&&(i&P)!==0,l=a||(i&q)!==0||this.skipped_effects.has(r);if((r.f&jt)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){s?r.f^=P:(i&bn)!==0?n.effects.push(r):Be(r)&&((r.f&le)!==0&&n.block_effects.push(r),ze(r));var c=r.first;if(c!==null){r=c;continue}}var o=r.parent;for(r=r.next;r===null&&o!==null;)o===n.effect&&(this.#i(n.effects),this.#i(n.render_effects),this.#i(n.block_effects),n=n.parent),r=o.next,o=o.parent}}#i(t){for(const n of t)((n.f&$)!==0?this.#a:this.#o).push(n),U(n,P)}capture(t,n){this.previous.has(t)||this.previous.set(t,n),this.current.set(t,t.v),Y?.set(t,t.v)}activate(){I=this}deactivate(){I=null,Y=null}flush(){if(this.activate(),pe.length>0){if(Ur(),I!==null&&I!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#n)t(this);this.#n.clear()}#c(){if(this.#r===0){for(const t of this.#t)t();this.#t.clear()}this.#e===0&&this.#u()}#u(){if(ct.size>1){this.previous.clear();var t=Y,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of ct){if(i===this){n=!1;continue}const s=[];for(const[l,c]of this.current){if(i.current.has(l))if(n&&c!==i.current.get(l))i.current.set(l,c);else continue;s.push(l)}if(s.length===0)continue;const a=[...i.current.keys()].filter(l=>!this.current.has(l));if(a.length>0){const l=new Set,c=new Map;for(const o of s)Mn(o,a,l,c);if(pe.length>0){I=i,i.apply();for(const o of pe)i.#l(o,r);pe=[],i.deactivate()}}}I=null,Y=t}this.committed=!0,ct.delete(this)}increment(t){this.#e+=1,t&&(this.#r+=1)}decrement(t){this.#e-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#a)U(t,$),Te(t);for(const t of this.#o)U(t,ne),Te(t);this.#a=[],this.#o=[],this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#n.add(t)}settled(){return(this.#s??=wn()).promise}static ensure(){if(I===null){const t=I=new Je;ct.add(I),Je.enqueue(()=>{I===t&&t.flush()})}return I}static enqueue(t){xn(t)}apply(){}}function Ur(){var e=De;Ot=!0;try{var t=0;for(sn(!0);pe.length>0;){var n=Je.ensure();if(t++>1e3){var r,i;Lr()}n.process(pe),_e.clear()}}finally{Ot=!1,sn(e),Bt=null}}function Lr(){try{Tr()}catch(e){mt(e,Bt)}}let re=null;function rn(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(se|q))===0&&Be(r)&&(re=new Set,ze(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?zn(r):r.fn=null),re?.size>0)){_e.clear();for(const i of re){if((i.f&(se|q))!==0)continue;const s=[i];let a=i.parent;for(;a!==null;)re.has(a)&&(re.delete(a),s.push(a)),a=a.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(se|q))===0&&ze(c)}}re.clear()}}re=null}}function Mn(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const i of e.reactions){const s=i.f;(s&F)!==0?Mn(i,t,n,r):(s&(Vt|le))!==0&&(s&$)===0&&In(i,t,r)&&(U(i,$),Te(i))}}function In(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(t.includes(i))return!0;if((i.f&F)!==0&&In(i,t,n))return n.set(i,!0),!0}return n.set(e,!1),!1}function Te(e){for(var t=Bt=e;t.parent!==null;){t=t.parent;var n=t.f;if(Ot&&t===b&&(n&le)!==0)return;if((n&(je|ce))!==0){if((n&P)===0)return;t.f^=P}}pe.push(t)}function Or(e,t,n,r){const i=rt()?Wt:Ze;if(n.length===0&&e.length===0){r(t.map(i));return}var s=I,a=b,l=Fr();function c(){Promise.all(n.map(o=>Nr(o))).then(o=>{l();try{r([...t.map(i),...o])}catch(u){(a.f&se)===0&&mt(u,a)}s?.deactivate(),_t()}).catch(o=>{mt(o,a)})}e.length>0?Promise.all(e).then(()=>{l();try{return c()}finally{s?.deactivate(),_t()}}):c()}function Fr(){var e=b,t=w,n=x,r=I;return function(s=!0){we(e),te(t),gt(n),s&&r?.activate()}}function _t(){we(null),te(null),gt(null)}function Wt(e){var t=F|$,n=w!==null&&(w.f&F)!==0?w:null;return b===null||n!==null&&(n.f&W)!==0?t|=W:b.f|=Tt,{ctx:x,deps:null,effects:null,equals:Sn,f:t,fn:e,reactions:null,rv:0,v:L,wv:0,parent:n??b,ac:null}}function Nr(e,t){let n=b;n===null&&br();var r=n.b,i=void 0,s=Qe(L),a=!w,l=new Map;return Wr(()=>{var c=wn();i=c.promise;try{Promise.resolve(e()).then(c.resolve,c.reject).then(()=>{o===I&&o.committed&&o.deactivate(),_t()})}catch(f){c.reject(f),_t()}var o=I;if(a){var u=!r.is_pending();r.update_pending_count(1),o.increment(u),l.get(o)?.reject(Le),l.delete(o),l.set(o,c)}const p=(f,h=void 0)=>{if(o.activate(),h)h!==Le&&(s.f|=Se,yt(s,h));else{(s.f&Se)!==0&&(s.f^=Se),yt(s,f);for(const[d,v]of l){if(l.delete(d),d===o)break;v.reject(Le)}}a&&(r.update_pending_count(-1),o.decrement(u))};c.promise.then(p,f=>p(null,f||"unknown"))}),Kt(()=>{for(const c of l.values())c.reject(Le)}),new Promise(c=>{function o(u){function p(){u===i?c(s):o(i)}u.then(p,p)}o(i)})}function Ze(e){const t=Wt(e);return t.equals=Tn,t}function An(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)ee(t[n])}}function Dr(e){for(var t=e.parent;t!==null;){if((t.f&F)===0)return t;t=t.parent}return null}function Gt(e){var t,n=b;we(Dr(e));try{e.f&=~vt,An(e),t=Gn(e)}finally{we(n)}return t}function Rn(e){var t=Gt(e);if(e.equals(t)||(e.v=t,e.wv=Bn()),!xe)if(Y!==null)Y.set(e,e.v);else{var n=(ve||(e.f&W)!==0)&&e.deps!==null?ne:P;U(e,n)}}let Ft=new Set;const _e=new Map;let Cn=!1;function Qe(e,t){var n={f:0,v:e,reactions:null,equals:Sn,rv:0,wv:0};return n}function he(e,t){const n=Qe(e);return Xr(n),n}function K(e,t=!1,n=!0){const r=Qe(e);return t||(r.equals=Tn),He&&n&&x!==null&&x.l!==null&&(x.l.s??=[]).push(r),r}function A(e,t,n=!1){w!==null&&(!Z||(w.f&nn)!==0)&&rt()&&(w.f&(F|le|Vt|nn))!==0&&!oe?.includes(e)&&Ar();let r=n?Fe(t):t;return yt(e,r)}function yt(e,t){if(!e.equals(t)){var n=e.v;xe?_e.set(e,t):_e.set(e,n),e.v=t;var r=Je.ensure();r.capture(e,n),(e.f&F)!==0&&((e.f&$)!==0&&Gt(e),U(e,(e.f&W)===0?P:ne)),e.wv=Bn(),Pn(e,$),rt()&&b!==null&&(b.f&P)!==0&&(b.f&(ce|je))===0&&(B===null?Jr([e]):B.push(e)),!r.is_fork&&Ft.size>0&&!Cn&&$r()}return t}function $r(){Cn=!1;const e=Array.from(Ft);for(const t of e)(t.f&P)!==0&&U(t,ne),Be(t)&&ze(t);Ft.clear()}function It(e){A(e,e.v+1)}function Pn(e,t){var n=e.reactions;if(n!==null)for(var r=rt(),i=n.length,s=0;s<i;s++){var a=n[s],l=a.f;if(!(!r&&a===b)){var c=(l&$)===0;c&&U(a,t),(l&F)!==0?(l&vt)===0&&(a.f|=vt,Pn(a,ne)):c&&((l&le)!==0&&re!==null&&re.add(a),Te(a))}}}function Fe(e){if(typeof e!="object"||e===null||Ne in e)return e;const t=Ht(e);if(t!==pr&&t!==vr)return e;var n=new Map,r=gn(e),i=he(0),s=Ee,a=l=>{if(Ee===s)return l();var c=w,o=Ee;te(null),on(s);var u=l();return te(c),on(o),u};return r&&n.set("length",he(e.length)),new Proxy(e,{defineProperty(l,c,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&Mr();var u=n.get(c);return u===void 0?u=a(()=>{var p=he(o.value);return n.set(c,p),p}):A(u,o.value,!0),!0},deleteProperty(l,c){var o=n.get(c);if(o===void 0){if(c in l){const u=a(()=>he(L));n.set(c,u),It(i)}}else A(o,L),It(i);return!0},get(l,c,o){if(c===Ne)return e;var u=n.get(c),p=c in l;if(u===void 0&&(!p||dt(l,c)?.writable)&&(u=a(()=>{var h=Fe(p?l[c]:L),d=he(h);return d}),n.set(c,u)),u!==void 0){var f=g(u);return f===L?void 0:f}return Reflect.get(l,c,o)},getOwnPropertyDescriptor(l,c){var o=Reflect.getOwnPropertyDescriptor(l,c);if(o&&"value"in o){var u=n.get(c);u&&(o.value=g(u))}else if(o===void 0){var p=n.get(c),f=p?.v;if(p!==void 0&&f!==L)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return o},has(l,c){if(c===Ne)return!0;var o=n.get(c),u=o!==void 0&&o.v!==L||Reflect.has(l,c);if(o!==void 0||b!==null&&(!u||dt(l,c)?.writable)){o===void 0&&(o=a(()=>{var f=u?Fe(l[c]):L,h=he(f);return h}),n.set(c,o));var p=g(o);if(p===L)return!1}return u},set(l,c,o,u){var p=n.get(c),f=c in l;if(r&&c==="length")for(var h=o;h<p.v;h+=1){var d=n.get(h+"");d!==void 0?A(d,L):h in l&&(d=a(()=>he(L)),n.set(h+"",d))}if(p===void 0)(!f||dt(l,c)?.writable)&&(p=a(()=>he(void 0)),A(p,Fe(o)),n.set(c,p));else{f=p.v!==L;var v=a(()=>Fe(o));A(p,v)}var _=Reflect.getOwnPropertyDescriptor(l,c);if(_?.set&&_.set.call(u,o),!f){if(r&&typeof c=="string"){var R=n.get("length"),m=Number(c);Number.isInteger(m)&&m>=R.v&&A(R,m+1)}It(i)}return!0},ownKeys(l){g(i);var c=Reflect.ownKeys(l).filter(p=>{var f=n.get(p);return f===void 0||f.v!==L});for(var[o,u]of n)u.v!==L&&!(o in l)&&c.push(o);return c},setPrototypeOf(){Ir()}})}var zr,Hr,jr;function $e(e=""){return document.createTextNode(e)}function wt(e){return Hr.call(e)}function it(e){return jr.call(e)}function E(e,t){return wt(e)}function At(e,t=!1){{var n=wt(e);return n instanceof Comment&&n.data===""?it(n):n}}function O(e,t=1,n=!1){let r=e;for(;t--;)r=it(r);return r}function qr(e){e.textContent=""}function Un(){return!1}function Yt(e){var t=w,n=b;te(null),we(null);try{return e()}finally{te(t),we(n)}}function Ln(e){b===null&&w===null&&Er(),w!==null&&(w.f&W)!==0&&b===null&&Sr(),xe&&kr()}function Vr(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function be(e,t,n,r=!0){var i=b;i!==null&&(i.f&q)!==0&&(e|=q);var s={ctx:x,deps:null,nodes_start:null,nodes_end:null,f:e|$,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{ze(s),s.f|=qt}catch(c){throw ee(s),c}else t!==null&&Te(s);if(r){var a=s;if(n&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&Tt)===0&&(a=a.first,(e&le)!==0&&(e&Xe)!==0&&a!==null&&(a.f|=Xe)),a!==null&&(a.parent=i,i!==null&&Vr(a,i),w!==null&&(w.f&F)!==0&&(e&je)===0)){var l=w;(l.effects??=[]).push(a)}}return s}function Kt(e){const t=be(Et,null,!1);return U(t,P),t.teardown=e,t}function Nt(e){Ln();var t=b.f,n=!w&&(t&ce)!==0&&(t&qt)===0;if(n){var r=x;(r.e??=[]).push(e)}else return On(e)}function On(e){return be(bn|kn,e,!1)}function Br(e){return Ln(),be(Et|kn,e,!0)}function ye(e,t){var n=x,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=Fn(()=>{e(),!r.ran&&(r.ran=!0,T(t))})}function st(){var e=x;Fn(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&P)!==0&&U(n,ne),Be(n)&&ze(n),t.ran=!1}})}function Wr(e){return be(Vt|Tt,e,!0)}function Fn(e,t=0){return be(Et|t,e,!0)}function ae(e,t=[],n=[],r=[]){Or(r,t,n,i=>{be(Et,()=>e(...i.map(g)),!0)})}function Nn(e,t=0){var n=be(le|t,e,!0);return n}function bt(e,t=!0){return be(ce|Tt,e,!0,t)}function Dn(e){var t=e.teardown;if(t!==null){const n=xe,r=w;an(!0),te(null);try{t.call(null)}finally{an(n),te(r)}}}function $n(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const i=n.ac;i!==null&&Yt(()=>{i.abort(Le)});var r=n.next;(n.f&je)!==0?n.parent=null:ee(n,t),n=r}}function Gr(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ce)===0&&ee(t),t=n}}function ee(e,t=!0){var n=!1;(t||(e.f&mr)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Yr(e.nodes_start,e.nodes_end),n=!0),$n(e,t&&!n),kt(e,0),U(e,se);var r=e.transitions;if(r!==null)for(const s of r)s.stop();Dn(e);var i=e.parent;i!==null&&i.first!==null&&zn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Yr(e,t){for(;e!==null;){var n=e===t?null:it(e);e.remove(),e=n}}function zn(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Hn(e,t,n=!0){var r=[];Xt(e,r,!0),jn(r,()=>{n&&ee(e),t&&t()})}function jn(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Xt(e,t,n){if((e.f&q)===0){if(e.f^=q,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var r=e.first;r!==null;){var i=r.next,s=(r.f&Xe)!==0||(r.f&ce)!==0&&(e.f&le)!==0;Xt(r,t,s?n:!1),r=i}}}function Jt(e){qn(e,!0)}function qn(e,t){if((e.f&q)!==0){e.f^=q,(e.f&P)===0&&(U(e,$),Te(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Xe)!==0||(n.f&ce)!==0;qn(n,i?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}function Kr(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var i=n===r?null:it(n);t.append(n),n=i}}let De=!1;function sn(e){De=e}let xe=!1;function an(e){xe=e}let w=null,Z=!1;function te(e){w=e}let b=null;function we(e){b=e}let oe=null;function Xr(e){w!==null&&(oe===null?oe=[e]:oe.push(e))}let D=null,H=0,B=null;function Jr(e){B=e}let Vn=1,et=0,Ee=et;function on(e){Ee=e}let ve=!1;function Bn(){return++Vn}function Be(e){var t=e.f;if((t&$)!==0)return!0;if((t&ne)!==0){var n=e.deps,r=(t&W)!==0;if(t&F&&(e.f&=~vt),n!==null){var i,s,a=(t&pt)!==0,l=r&&b!==null&&!ve,c=n.length;if((a||l)&&(b===null||(b.f&se)===0)){var o=e,u=o.parent;for(i=0;i<c;i++)s=n[i],(a||!s?.reactions?.includes(o))&&(s.reactions??=[]).push(o);a&&(o.f^=pt),l&&u!==null&&(u.f&W)===0&&(o.f^=W)}for(i=0;i<c;i++)if(s=n[i],Be(s)&&Rn(s),s.wv>e.wv)return!0}(!r||b!==null&&!ve)&&U(e,P)}return!1}function Wn(e,t,n=!0){var r=e.reactions;if(r!==null&&!oe?.includes(e))for(var i=0;i<r.length;i++){var s=r[i];(s.f&F)!==0?Wn(s,t,!1):t===s&&(n?U(s,$):(s.f&P)!==0&&U(s,ne),Te(s))}}function Gn(e){var t=D,n=H,r=B,i=w,s=ve,a=oe,l=x,c=Z,o=Ee,u=e.f;D=null,H=0,B=null,ve=(u&W)!==0&&(Z||!De||w===null),w=(u&(ce|je))===0?e:null,oe=null,gt(e.ctx),Z=!1,Ee=++et,e.ac!==null&&(Yt(()=>{e.ac.abort(Le)}),e.ac=null);try{e.f|=Lt;var p=e.fn,f=p(),h=e.deps;if(D!==null){var d;if(kt(e,H),h!==null&&H>0)for(h.length=H+D.length,d=0;d<D.length;d++)h[H+d]=D[d];else e.deps=h=D;if(!ve||(u&F)!==0&&e.reactions!==null)for(d=H;d<h.length;d++)(h[d].reactions??=[]).push(e)}else h!==null&&H<h.length&&(kt(e,H),h.length=H);if(rt()&&B!==null&&!Z&&h!==null&&(e.f&(F|ne|$))===0)for(d=0;d<B.length;d++)Wn(B[d],e);return i!==null&&i!==e&&(et++,B!==null&&(r===null?r=B:r.push(...B))),(e.f&Se)!==0&&(e.f^=Se),f}catch(v){return Pr(v)}finally{e.f^=Lt,D=t,H=n,B=r,w=i,ve=s,oe=a,gt(l),Z=c,Ee=o}}function Zr(e,t){let n=t.reactions;if(n!==null){var r=hr.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&F)!==0&&(D===null||!D.includes(t))&&(U(t,ne),(t.f&(W|pt))===0&&(t.f^=pt),An(t),kt(t,0))}function kt(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Zr(e,n[r])}function ze(e){var t=e.f;if((t&se)===0){U(e,P);var n=b,r=De;b=e,De=!0;try{(t&le)!==0?Gr(e):$n(e),Dn(e);var i=Gn(e);e.teardown=typeof i=="function"?i:null,e.wv=Vn;var s;vn&&nr&&(e.f&$)!==0&&e.deps}finally{De=r,b=n}}}function g(e){var t=e.f,n=(t&F)!==0;if(w!==null&&!Z){var r=b!==null&&(b.f&se)!==0;if(!r&&!oe?.includes(e)){var i=w.deps;if((w.f&Lt)!==0)e.rv<et&&(e.rv=et,D===null&&i!==null&&i[H]===e?H++:D===null?D=[e]:(!ve||!D.includes(e))&&D.push(e));else{(w.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[w]:s.includes(w)||s.push(w)}}}else if(n&&e.deps===null&&e.effects===null){var a=e,l=a.parent;l!==null&&(l.f&W)===0&&(a.f^=W)}if(xe){if(_e.has(e))return _e.get(e);if(n){a=e;var c=a.v;return((a.f&P)===0&&a.reactions!==null||Yn(a))&&(c=Gt(a)),_e.set(a,c),c}}else if(n){if(a=e,Y?.has(a))return Y.get(a);Be(a)&&Rn(a)}if(Y?.has(e))return Y.get(e);if((e.f&Se)!==0)throw e.v;return e.v}function Yn(e){if(e.v===L)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(_e.has(t)||(t.f&F)!==0&&Yn(t))return!0;return!1}function T(e){var t=Z;try{return Z=!0,e()}finally{Z=t}}const Qr=-7169;function U(e,t){e.f=e.f&Qr|t}function Pe(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ne in e)Dt(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Ne in n&&Dt(n)}}}function Dt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Dt(e[r],t)}catch{}const n=Ht(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=yn(n);for(let i in r){const s=r[i].get;if(s)try{s.call(e)}catch{}}}}}function ei(e,t,n,r={}){function i(s){if(r.capture||ti.call(t,s),!s.cancelBubble)return Yt(()=>n?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?xn(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function tt(e,t,n,r,i){var s={capture:r,passive:i},a=ei(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Kt(()=>{t.removeEventListener(e,a,s)})}let ln=null;function ti(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],s=i[0]||e.target;ln=e;var a=0,l=ln===e&&e.__root;if(l){var c=i.indexOf(l);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var o=i.indexOf(t);if(o===-1)return;c<=o&&(a=c)}if(s=i[a]||e.target,s!==t){_n(e,"currentTarget",{configurable:!0,get(){return s||n}});var u=w,p=b;te(null),we(null);try{for(var f,h=[];s!==null;){var d=s.assignedSlot||s.parentNode||s.host||null;try{var v=s["__"+r];v!=null&&(!s.disabled||e.target===s)&&v.call(s,e)}catch(_){f?h.push(_):f=_}if(e.cancelBubble||d===t||d===null)break;s=d}if(f){for(let _ of h)queueMicrotask(()=>{throw _});throw f}}finally{e.__root=t,delete e.currentTarget,te(u),we(p)}}}function ni(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function St(e,t){var n=b;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function G(e,t){var n=(t&ur)!==0,r=(t&fr)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=ni(s?e:"<!>"+e),n||(i=wt(i)));var a=r||zr?document.importNode(i,!0):i.cloneNode(!0);if(n){var l=wt(a),c=a.lastChild;St(l,c)}else St(a,a);return a}}function Re(e=""){{var t=$e(e+"");return St(t,t),t}}function cn(){var e=document.createDocumentFragment(),t=document.createComment(""),n=$e();return e.append(t,n),St(t,n),e}function M(e,t){e!==null&&e.before(t)}function ge(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}class ri{anchor;#t=new Map;#n=new Map;#e=new Map;#r=!0;constructor(t,n=!0){this.anchor=t,this.#r=n}#s=()=>{var t=I;if(this.#t.has(t)){var n=this.#t.get(t),r=this.#n.get(n);if(r)Jt(r);else{var i=this.#e.get(n);i&&(this.#n.set(n,i.effect),this.#e.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,a]of this.#t){if(this.#t.delete(s),s===t)break;const l=this.#e.get(a);l&&(ee(l.effect),this.#e.delete(a))}for(const[s,a]of this.#n){if(s===n)continue;const l=()=>{if(Array.from(this.#t.values()).includes(s)){var o=document.createDocumentFragment();Kr(a,o),o.append($e()),this.#e.set(s,{effect:a,fragment:o})}else ee(a);this.#n.delete(s)};this.#r||!r?Hn(a,l,!1):l()}}};#a=t=>{this.#t.delete(t);const n=Array.from(this.#t.values());for(const[r,i]of this.#e)n.includes(r)||(ee(i.effect),this.#e.delete(r))};ensure(t,n){var r=I,i=Un();if(n&&!this.#n.has(t)&&!this.#e.has(t))if(i){var s=document.createDocumentFragment(),a=$e();s.append(a),this.#e.set(t,{effect:bt(()=>n(a)),fragment:s})}else this.#n.set(t,bt(()=>n(this.anchor)));if(this.#t.set(r,t),i){for(const[l,c]of this.#n)l===t?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of this.#e)l===t?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(this.#s),r.ondiscard(this.#a)}else this.#s()}}function Zt(e){x===null&&wr(),He&&x.l!==null?ii(x).m.push(e):Nt(()=>{const t=T(e);if(typeof t=="function")return t})}function ii(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}function ie(e,t,n=!1){var r=new ri(e),i=n?Xe:0;function s(a,l){r.ensure(a,l)}Nn(()=>{var a=!1;t((l,c=!0)=>{a=!0,s(c,l)}),a||s(!1,null)},i)}function si(e,t){return t}function ai(e,t,n){for(var r=e.items,i=[],s=t.length,a=0;a<s;a++)Xt(t[a].e,i,!0);var l=s>0&&i.length===0&&n!==null;if(l){var c=n.parentNode;qr(c),c.append(n),r.clear(),J(e,t[0].prev,t[s-1].next)}jn(i,()=>{for(var o=0;o<s;o++){var u=t[o];l||(r.delete(u.k),J(e,u.prev,u.next)),ee(u.e,!l)}})}function oi(e,t,n,r,i,s=null){var a=e,l={flags:t,items:new Map,first:null};{var c=e;a=c.appendChild($e())}var o=null,u=!1,p=new Map,f=Ze(()=>{var _=n();return gn(_)?_:_==null?[]:mn(_)}),h,d;function v(){li(d,h,l,p,a,i,t,r,n),s!==null&&(h.length===0?o?Jt(o):o=bt(()=>s(a)):o!==null&&Hn(o,()=>{o=null}))}Nn(()=>{d??=b,h=g(f);var _=h.length;if(!(u&&_===0)){u=_===0;var R,m,y,S;if(Un()){var z=new Set,ke=I;for(m=0;m<_;m+=1){y=h[m],S=r(y,m);var Me=l.items.get(S)??p.get(S);Me?Kn(Me,y,m):(R=Xn(null,l,null,null,y,S,m,i,t,n,!0),p.set(S,R)),z.add(S)}for(const[ue,V]of l.items)z.has(ue)||ke.skipped_effects.add(V.e);ke.oncommit(v)}else v();g(f)}})}function li(e,t,n,r,i,s,a,l,c){var o=t.length,u=n.items,p=n.first,f=p,h,d=null,v=[],_=[],R,m,y,S;for(S=0;S<o;S+=1){if(R=t[S],m=l(R,S),y=u.get(m),y===void 0){var z=r.get(m);if(z!==void 0){r.delete(m),u.set(m,z);var ke=d?d.next:f;J(n,d,z),J(n,z,ke),Rt(z,ke,i),d=z}else{var Me=f?f.e.nodes_start:i;d=Xn(Me,n,d,d===null?n.first:d.next,R,m,S,s,a,c)}u.set(m,d),v=[],_=[],f=d.next;continue}if(Kn(y,R,S),(y.e.f&q)!==0&&Jt(y.e),y!==f){if(h!==void 0&&h.has(y)){if(v.length<_.length){var ue=_[0],V;d=ue.prev;var lt=v[0],We=v[v.length-1];for(V=0;V<v.length;V+=1)Rt(v[V],ue,i);for(V=0;V<_.length;V+=1)h.delete(_[V]);J(n,lt.prev,We.next),J(n,d,lt),J(n,We,ue),f=ue,d=We,S-=1,v=[],_=[]}else h.delete(y),Rt(y,f,i),J(n,y.prev,y.next),J(n,y,d===null?n.first:d.next),J(n,d,y),d=y;continue}for(v=[],_=[];f!==null&&f.k!==m;)(f.e.f&q)===0&&(h??=new Set).add(f),_.push(f),f=f.next;if(f===null)continue;y=f}v.push(y),d=y,f=y.next}if(f!==null||h!==void 0){for(var fe=h===void 0?[]:mn(h);f!==null;)(f.e.f&q)===0&&fe.push(f),f=f.next;var Mt=fe.length;if(Mt>0){var C=o===0?i:null;ai(n,fe,C)}}e.first=n.first&&n.first.e,e.last=d&&d.e;for(var k of r.values())ee(k.e);r.clear()}function Kn(e,t,n,r){yt(e.v,t),e.i=n}function Xn(e,t,n,r,i,s,a,l,c,o,u){var p=(c&ir)!==0,f=(c&ar)===0,h=p?f?K(i,!1,!1):Qe(i):i,d=(c&sr)===0?a:Qe(a),v={i:d,v:h,k:s,a:null,e:null,prev:n,next:r};try{if(e===null){var _=document.createDocumentFragment();_.append(e=$e())}return v.e=bt(()=>l(e,h,d,o),Rr),v.e.prev=n&&n.e,v.e.next=r&&r.e,n===null?u||(t.first=v):(n.next=v,n.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function Rt(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==r;){var a=it(s);i.before(s),s=a}}function J(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}const un=[...` 	
\r\f \v\uFEFF`];function ci(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,a=0;(a=r.indexOf(i,a))>=0;){var l=a+s;(a===0||un.includes(r[a-1]))&&(l===r.length||un.includes(r[l]))?r=(a===0?"":r.substring(0,a))+r.substring(l+1):a=l}}return r===""?null:r}function Jn(e,t,n,r,i,s){var a=e.__className;if(a!==n||a===void 0){var l=ci(n,r,s);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(s&&i!==s)for(var c in s){var o=!!s[c];(i==null||o!==!!i[c])&&e.classList.toggle(c,o)}return s}const ui=Symbol("is custom element"),fi=Symbol("is html");function j(e,t,n,r){var i=di(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[yr]=n),n==null?e.removeAttribute(t):typeof n!="string"&&hi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function di(e){return e.__attributes??={[ui]:e.nodeName.includes("-"),[fi]:e.namespaceURI===dr}}var fn=new Map;function hi(e){var t=e.getAttribute("is")||e.nodeName,n=fn.get(t);if(n)return n;fn.set(t,n=[]);for(var r,i=e,s=Element.prototype;s!==i;){r=yn(i);for(var a in r)r[a].set&&n.push(a);i=Ht(i)}return n}function at(e=!1){const t=x,n=t.l.u;if(!n)return;let r=()=>Pe(t.s);if(e){let i=0,s={};const a=Wt(()=>{let l=!1;const c=t.s;for(const o in c)c[o]!==s[o]&&(s[o]=c[o],l=!0);return l&&i++,i});r=()=>g(a)}n.b.length&&Br(()=>{dn(t,r),ht(n.b)}),Nt(()=>{const i=T(()=>n.m.map(gr));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&Nt(()=>{dn(t,r),ht(n.a)})}function dn(e,t){if(e.l.s)for(const n of e.l.s)g(n);t()}function Qt(e,t,n){if(e==null)return t(void 0),n&&n(void 0),me;const r=T(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Ce=[];function pi(e,t){return{subscribe:ot(e,t).subscribe}}function ot(e,t=me){let n=null;const r=new Set;function i(l){if(En(e,l)&&(e=l,n)){const c=!Ce.length;for(const o of r)o[1](),Ce.push(o,e);if(c){for(let o=0;o<Ce.length;o+=2)Ce[o][0](Ce[o+1]);Ce.length=0}}}function s(l){i(l(e))}function a(l,c=me){const o=[l,c];return r.add(o),r.size===1&&(n=t(i,s)||me),l(e),()=>{r.delete(o),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}function Zn(e,t,n){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return pi(n,(a,l)=>{let c=!1;const o=[];let u=0,p=me;const f=()=>{if(u)return;p();const d=t(r?o[0]:o,a,l);s?a(d):p=typeof d=="function"?d:me},h=i.map((d,v)=>Qt(d,_=>{o[v]=_,u&=~(1<<v),c&&f()},()=>{u|=1<<v}));return c=!0,f(),function(){ht(h),p(),c=!1}})}function $t(e){let t;return Qt(e,n=>t=n)(),t}let ut=!1,zt=Symbol();function nt(e,t,n){const r=n[t]??={store:null,source:K(void 0),unsubscribe:me};if(r.store!==e&&!(zt in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=me;else{var i=!0;r.unsubscribe=Qt(e,s=>{i?r.source.v=s:A(r.source,s)}),i=!1}return e&&zt in n?$t(e):g(r.source)}function xt(){const e={};function t(){Kt(()=>{for(var n in e)e[n].unsubscribe();_n(e,zt,{enumerable:!1,value:!0})})}return[e,t]}function vi(e){var t=ut;try{return ut=!1,[e(),ut]}finally{ut=t}}function Ue(e,t,n,r){var i=!He||(n&or)!==0,s=(n&cr)!==0,a=r,l=!0,c=()=>(l&&(l=!1,a=r),a),o;{var u=Ne in e||_r in e;o=dt(e,t)?.set??(u&&t in e?m=>e[t]=m:void 0)}var p,f=!1;[p,f]=vi(()=>e[t]),p===void 0&&r!==void 0&&(p=c(),o&&(i&&xr(),o(p)));var h;if(i?h=()=>{var m=e[t];return m===void 0?c():(l=!0,m)}:h=()=>{var m=e[t];return m!==void 0&&(a=void 0),m===void 0?a:m},i&&(n&lr)===0)return h;if(o){var d=e.$$legacy;return(function(m,y){return arguments.length>0?((!i||!y||d||f)&&o(y?h():m),m):h()})}var v=!1,_=Ze(()=>(v=!1,h()));g(_);var R=b;return(function(m,y){if(arguments.length>0){const S=y?g(_):i&&s?Fe(m):m;return A(_,S),v=!0,a!==void 0&&(a=S),m}return xe&&v||(R.f&se)!==0?_.v:g(_)})}const gi=[{id:"secure-context",name:"Secure connection (HTTPS or localhost)",check:()=>{if(typeof window>"u")return!1;const e=/^(?:localhost|127(?:\.\d{1,3}){3}|::1|\[::1\])$/i;return window.isSecureContext||e.test(window.location.hostname)},passMessage:"Secure connection detected. Unity can safely access the microphone and speech features.",failMessage:'Open this page with https:// or from localhost, then press "Check again."',passStatus:"Ready — secure and private",failStatus:"Fix: Use HTTPS or localhost"},{id:"speech-recognition",name:"Web Speech Recognition API",check:()=>typeof window>"u"?!1:!!(window.SpeechRecognition||window.webkitSpeechRecognition),passMessage:"Speech recognition is available. Unity will understand what you say.",failMessage:"Firefox is supported via the Vosklet fallback library.",passStatus:"Ready — Unity can listen",failStatus:"Ready — Vosklet fallback"},{id:"speech-synthesis",name:"Speech synthesis voices",check:()=>typeof window>"u"||!window.speechSynthesis?!1:window.speechSynthesis.getVoices().length>0,passMessage:"Speech voices are ready. Unity can answer out loud through your speakers.",failMessage:'Use Chrome, Edge, or Safari with audio enabled, then press "Check again."',passStatus:"Ready — Unity can speak back",failStatus:"Fix: Enable browser speech voices"},{id:"microphone",name:"Microphone access",check:()=>typeof navigator>"u"||!navigator.mediaDevices?!1:!!navigator.mediaDevices.getUserMedia,passMessage:"Microphone permission granted. Unity can hear your voice input.",failMessage:'Click "Allow" on the microphone prompt or enable it in site settings, then press "Check again."',passStatus:"Ready — Microphone unlocked",failStatus:"Fix: Allow microphone access"}],en=ot([]),mi=Zn(en,e=>{const t=e.filter(n=>!n.met).map(n=>n.name);return{allMet:t.length===0,missing:t,results:e}});function _i(){const e=gi.map(t=>{let n=!1;try{n=!!t.check()}catch(r){console.error(`Dependency check failed for ${t.id}:`,r)}return{...t,met:n}});en.set(e)}var yi=G('<li class="dependency-item"><div class="dependency-header"><span class="dependency-name"> </span> <span class="dependency-status"> </span></div> <p class="dependency-message"> </p></li>'),wi=G('<div class="landing-overview surface-card"><div class="landing-status" role="status" aria-live="polite"><!></div> <div class="landing-body"><div class="dependency-summary"><span class="dependency-light" data-role="dependency-light" aria-live="polite"></span> <div class="dependency-summary-text"><h2>What the lights mean</h2> <p><!></p></div></div> <ul class="dependency-list"></ul></div></div> <div class="landing-actions surface-card action-bar"><button id="launch-app" class="primary" type="button">Talk to Unity</button> <button id="recheck-dependencies" class="ghost" type="button">Check again</button></div>',1);function bi(e,t){qe(t,!1);const n=()=>nt(mi,"$dependencyEvaluation",i),r=()=>nt(en,"$dependencyResults",i),[i,s]=xt(),a=K(),l=K();let c=Ue(t,"onAllReady",8,()=>{}),o=K(!1);Zt(()=>(u(),window.addEventListener("focus",u),window.speechSynthesis&&window.speechSynthesis.addEventListener("voiceschanged",u),()=>{window.removeEventListener("focus",u),window.speechSynthesis&&window.speechSynthesis.removeEventListener("voiceschanged",u)}));function u(){A(o,!0),_i(),setTimeout(()=>{A(o,!1)},500)}function p(){n().missing.length<4&&c()()}ye(()=>n(),()=>{A(a,n().missing.length<4)}),ye(()=>(g(o),n()),()=>{A(l,g(o)?"pending":n().allMet?"pass":"warn")}),st(),at();var f=wi(),h=At(f),d=E(h),v=E(d);{var _=C=>{var k=Re("All systems ready!");M(C,k)},R=C=>{var k=cn(),de=At(k);{var Ie=N=>{var X=Re();ae(()=>ge(X,`${n(),T(()=>n().missing.length)??""} item${n(),T(()=>n().missing.length>1?"s":"")??""} need attention`)),M(N,X)},Ae=N=>{var X=Re("Checking requirements...");M(N,X)};ie(de,N=>{n(),T(()=>n().missing.length>0)?N(Ie):N(Ae,!1)},!0)}M(C,k)};ie(v,C=>{n(),T(()=>n().allMet)?C(_):C(R,!1)})}var m=O(d,2),y=E(m),S=E(y),z=O(S,2),ke=O(E(z),2),Me=E(ke);{var ue=C=>{var k=Re("We're checking right now. Green means your setup is ready. An amber light means we need to fix that part together before Unity can listen.");M(C,k)},V=C=>{var k=cn(),de=At(k);{var Ie=N=>{var X=Re("Every dependency is satisfied. You're ready to talk to Unity!");M(N,X)},Ae=N=>{var X=Re("Green means ready. Amber means needs attention before Unity can fully function.");M(N,X)};ie(de,N=>{n(),T(()=>n().allMet)?N(Ie):N(Ae,!1)},!0)}M(C,k)};ie(Me,C=>{g(o)?C(ue):C(V,!1)})}var lt=O(y,2);oi(lt,5,r,si,(C,k)=>{var de=yi(),Ie=E(de),Ae=E(Ie),N=E(Ae),X=O(Ae,2),Qn=E(X),tn=O(Ie,2),er=E(tn);ae(()=>{j(de,"data-dependency",(g(k),T(()=>g(k).id))),j(de,"data-state",(g(k),T(()=>g(k).met?"pass":"fail"))),ge(N,(g(k),T(()=>g(k).name))),ge(Qn,(g(k),T(()=>g(k).met?g(k).passStatus:g(k).failStatus))),j(tn,"data-message-type",(g(k),T(()=>g(k).met?"pass":"fail"))),ge(er,(g(k),T(()=>g(k).met?g(k).passMessage:g(k).failMessage)))}),M(C,de)});var We=O(h,2),fe=E(We),Mt=O(fe,2);ae(()=>{j(S,"data-state",g(l)),j(S,"aria-label",(g(o),n(),T(()=>g(o)?"Checking requirements":n().allMet?"All ready":"Some requirements need attention"))),fe.disabled=!g(a),j(fe,"aria-disabled",!g(a))}),tt("click",fe,p),tt("click",Mt,u),M(e,f),Ve(),s()}class ki{recognition=null;isFirefox;restartTimeout=null;onTranscriptCallback=null;onErrorCallback=null;constructor(){this.isFirefox=navigator.userAgent.toLowerCase().includes("firefox")}async initialize(){try{this.isFirefox&&await this.loadVosklet();const t=window.SpeechRecognition||window.webkitSpeechRecognition;if(!t)throw new Error("Speech Recognition API not available");return this.recognition=new t,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.maxAlternatives=1,this.setupEventHandlers(),!0}catch(t){return console.error("Failed to initialize speech recognition:",t),!1}}async loadVosklet(){return new Promise((t,n)=>{const r=document.createElement("script");r.src=new URL("./vosklet-adapter.js",window.location.href).toString(),r.onload=()=>t(),r.onerror=()=>n(new Error("Failed to load Vosklet")),document.head.appendChild(r)})}setupEventHandlers(){this.recognition&&(this.recognition.onresult=t=>{const n=t.results[t.results.length-1];if(!n)return;const r=n[0]?.transcript.trim(),i=n.isFinal;r&&this.onTranscriptCallback&&this.onTranscriptCallback(r,i)},this.recognition.onerror=t=>{console.error("Speech recognition error:",t.error),this.onErrorCallback&&this.onErrorCallback(t.error),(t.error==="no-speech"||t.error==="audio-capture")&&this.scheduleRestart()},this.recognition.onend=()=>{this.scheduleRestart()})}scheduleRestart(){this.restartTimeout&&window.clearTimeout(this.restartTimeout),this.restartTimeout=window.setTimeout(()=>{if(this.recognition)try{this.recognition.start()}catch(t){console.warn("Speech recognition restart failed:",t)}},1e3)}start(){if(!this.recognition){console.warn("Speech recognition not initialized");return}try{this.recognition.start()}catch(t){console.warn("Speech recognition already started:",t)}}stop(){this.restartTimeout&&(window.clearTimeout(this.restartTimeout),this.restartTimeout=null),this.recognition&&this.recognition.stop()}onTranscript(t){this.onTranscriptCallback=t}onError(t){this.onErrorCallback=t}}const Ge=new ki;function Si(e){if(!e||typeof e!="string")return!1;const t=e.trim().replace(/[.,;!?'"]+$/,"");if(t.length===0)return!1;const n=t.toLowerCase();return!!(n.startsWith("http://")||n.startsWith("https://")||n.startsWith("www.")||n.includes("://")||/\.[a-z]{2,}(\/|$)/i.test(n))}function Ei(e){return e?e.replace(/\[([^\]]+)\]\([^)]+\)/g,"$1"):""}function Ti(e){if(!e)return"";const t=[/(?:^|\n)\s*(?:commands?|actions?)\s*:?\s*\n(?:\s*[-*•]?\s*[a-z0-9_\-]+\s*(?:\(\))?\s*\n?)+/gi,/(?:^|\s)\/\s*(?:open_image|save_image|copy_image|mute_microphone|unmute_microphone|stop_speaking|shutup|set_model_\w+|clear_chat_history|theme_\w+)\b/gi];let n=e;for(const r of t)n=n.replace(r,"");return n.replace(/\n{3,}/g,`

`).trim()}function xi(e){if(!e||typeof e!="string")return"";let t=e.replace(/https?:\/\/[^\s]*pollinations\.ai[^\s]*/gi,"");return t=Ei(t),t=Ti(t),t=t.split(/(\s+)/).map(i=>/^\s+$/.test(i)?i:Si(i)?"":i).join("").replace(/\s{2,}/g," ").trim(),t=t.replace(/\[\s*\]/g,""),t=t.replace(/\n{3,}/g,`

`),t}function Ct(e){return!e||typeof e!="string"?"":e.replace(/[<>]/g,"").replace(/\s{2,}/g," ").trim()}class Mi{synth;constructor(){this.synth=window.speechSynthesis}speak(t,n={}){if(!t.trim())return;n.priority&&this.isSpeaking()&&this.stop();const r=xi(t),i=new SpeechSynthesisUtterance(r),a=this.synth.getVoices().find(l=>l.lang.startsWith("en-GB")&&l.name.toLowerCase().includes("female"));a&&(i.voice=a),i.rate=1.1,i.pitch=1,i.volume=1,i.onerror=l=>{console.error("Speech synthesis error:",l)},this.synth.speak(i)}stop(){this.synth.cancel()}isSpeaking(){return this.synth.speaking}pause(){this.isSpeaking()&&this.synth.pause()}resume(){this.synth.paused&&this.synth.resume()}}const ft=new Mi;function Ii(){const{subscribe:e,update:t}=ot({isMuted:!0,hasMicPermission:!1,isListening:!1,isSpeaking:!1,currentTranscript:"",error:null}),n=Zn({subscribe:e},r=>r.error?"error":r.isSpeaking?"speaking":r.isListening?"listening":"idle");return{subscribe:e,voiceState:n,async requestMicPermission(){try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(i=>i.stop()),t(i=>({...i,hasMicPermission:!0,error:null})),!0}catch(r){return console.error("Microphone permission denied:",r),t(i=>({...i,hasMicPermission:!1,error:"Microphone access denied"})),!1}},async initialize(){return await this.requestMicPermission()?await Ge.initialize()?(Ge.onTranscript((s,a)=>{t(l=>({...l,currentTranscript:s})),a&&window.dispatchEvent(new CustomEvent("voice:transcript",{detail:{transcript:s}}))}),Ge.onError(s=>{t(a=>({...a,error:s}))}),!0):(t(s=>({...s,error:"Failed to initialize speech recognition"})),!1):!1},async unmute(){!$t({subscribe:e}).hasMicPermission&&!await this.requestMicPermission()||(t(i=>({...i,isMuted:!1,isListening:!0})),Ge.start())},mute(){t(r=>({...r,isMuted:!0,isListening:!1})),Ge.stop(),ft.stop()},toggleMute(){$t({subscribe:e}).isMuted?this.unmute():this.mute()},speak(r,i){t(s=>({...s,isSpeaking:!0})),ft.speak(r,i),setTimeout(()=>{ft.isSpeaking()||t(s=>({...s,isSpeaking:!1}))},100)},stopSpeaking(){ft.stop(),t(r=>({...r,isSpeaking:!1}))},clearError(){t(r=>({...r,error:null}))}}}const Q=Ii();function Pt(e){return e.trim().toLowerCase().replace(/[^a-z0-9_]/g,"_")}function Ai(e){if(!e)return{cleanedText:"",commands:[]};let t=e;const n=[],r=/`([a-z0-9_\-]+)`/gi;let i;for(;(i=r.exec(e))!==null;){const o=i[1];if(o){const u=Pt(o);u&&(n.push(u),t=t.replace(i[0],""))}}const s=/(?:^|\s)\/ (open_image|save_image|copy_image|mute_microphone|unmute_microphone|stop_speaking|shutup|set_model_flux|set_model_turbo|set_model_kontext|clear_chat_history|theme_light|theme_dark)\b/gi;for(;(i=s.exec(e))!==null;){const o=i[1];if(o){const u=Pt(o);n.push(u),t=t.replace(i[0],"")}}const a=/(?:^|\n)\s*(?:commands?|actions?)\s*:?\s*(?:\n|$ )((?:\s*[-*•]?\s*[a-z0-9_\-]+\s*(?:\(\))?\s*(?:\n|$))+)/gi;for(;(i=a.exec(e))!==null;){const o=i[1];if(o){const u=o.split(/\n/).filter(p=>p.trim());for(const p of u){const f=p.trim().replace(/^[-*•]\s*/,"");if(f){const h=Pt(f.replace(/\(\)/g,""));h&&n.push(h)}}t=t.replace(i[0],"")}}const l=t.replace(/\n{3,}/g,`

`).trim(),c=[...new Set(n)];return{cleanedText:l,commands:c}}function Ri(e){if(!e||typeof e!="string")return null;const t=e.match(/!\[[^\]]*\]\((https?:\/\/[^)\s]+)\)/i);if(t?.[1])return t[1];const n=e.match(/https?:\/\/[^)\s]+/i);return n?.[0]?n[0]:null}function Ci(e,t){if(!e||!t)return e;const n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");let r=e.replace(new RegExp(`!\\[[^\\]]*\\]\\(${n}\\)`,"gi"),"");return r=r.replace(new RegExp(`\\[[^\\]]*\\]\\(${n}\\)`,"gi"),""),r=r.replace(new RegExp(n,"gi"),""),r.replace(/\n{3,}/g,`

`).trim()}const Pi="https://text.pollinations.ai/openai",Ui="https://image.pollinations.ai/prompt";class Li{chatHistory=[];systemPrompt="";currentImageModel="flux";setSystemPrompt(t){this.systemPrompt=t}getSystemPrompt(){return this.systemPrompt}getChatHistory(){return[...this.chatHistory]}clearChatHistory(){this.chatHistory=[]}setImageModel(t){this.currentImageModel=t}getImageModel(){return this.currentImageModel}async getResponse(t){this.chatHistory.push({role:"user",content:t});const n=[];this.systemPrompt&&n.push({role:"system",content:this.systemPrompt}),n.push(...this.chatHistory);try{const r=await fetch(Pi,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:n,model:"openai",seed:Date.now()})});if(!r.ok)throw new Error(`AI API error: ${r.status}`);const i=await r.json(),s=i?.choices?.[0]?.message?.content||i?.message?.content||"",{cleanedText:a,commands:l}=Ai(s);let c=Ri(s),o=a;return c&&(o=Ci(a,c)),!c&&this.shouldGenerateImage(t,o)&&(c=this.buildImageUrl(this.buildImagePrompt(t,o))),this.chatHistory.push({role:"assistant",content:o}),{text:o,imageUrl:c?this.cutImageUrl(c):null,commands:l}}catch(r){throw console.error("AI service error:",r),r}}shouldGenerateImage(t,n){const r=`${t} ${n}`.toLowerCase();return["image","picture","photo","visual","illustration","draw","create","generate","show me","display","render","depict","portray"].some(s=>r.includes(s))}buildImagePrompt(t,n){const r=`${t} ${n}`,i=r.match(/(?:image\s+prompt|prompt)\s*[:=]\s*"?([^"\n]+)"?/i);return i?.[1]?Ct(i[1]):Ct(r.replace(/(?:here\s+(?:is|'s)|displaying|showing)\s+(?:an?\s+)?(?:image|picture|photo)/gi,"").replace(/(?:image|picture|photo)\s+of\s+/gi,""))||"abstract digital art"}buildImageUrl(t,n){const r=n||this.currentImageModel,i=Ct(t),s=new URLSearchParams({model:r,width:"1024",height:"1024",seed:String(Date.now()),nologo:"true"}),a=encodeURIComponent(i);return`${Ui}/${a}?${s.toString()}`}cutImageUrl(t){return t?t.split("?")[0]||t:""}}const Ye=new Li;function Oi(){const{subscribe:e,update:t}=ot({currentImageUrl:null,isLoading:!1,error:null});return{subscribe:e,setImage(n){if(!n)return;t(i=>({...i,isLoading:!0,error:null}));const r=new Image;r.onload=()=>{t(i=>({...i,currentImageUrl:n,isLoading:!1}))},r.onerror=()=>{t(i=>({...i,isLoading:!1,error:"Failed to load image"}))},r.src=n},clearImage(){t(n=>({...n,currentImageUrl:null,isLoading:!1,error:null}))},openInNewTab(){const n=Ut({subscribe:e});n.currentImageUrl&&window.open(n.currentImageUrl,"_blank","noopener,noreferrer")},async saveImage(){const n=Ut({subscribe:e});if(n.currentImageUrl)try{const i=await(await fetch(n.currentImageUrl)).blob(),s=window.URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=`unity-generated-${Date.now()}.png`,a.click(),window.URL.revokeObjectURL(s)}catch(r){console.error("Failed to save image:",r),t(i=>({...i,error:"Failed to save image"}))}},async copyToClipboard(){const n=Ut({subscribe:e});if(n.currentImageUrl)try{const i=await(await fetch(n.currentImageUrl)).blob();await navigator.clipboard.write([new ClipboardItem({[i.type]:i})])}catch(r){console.error("Failed to copy image:",r),t(i=>({...i,error:"Failed to copy image to clipboard"}))}},clearError(){t(n=>({...n,error:null}))}}}function Ut(e){let t=null;return e.subscribe(r=>t=r)(),t}const Ke=Oi();function Fi(){const{subscribe:e,update:t}=ot({messages:[],isProcessing:!1,error:null,systemPrompt:"",currentModel:"flux"});return{subscribe:e,async loadSystemPrompt(){try{const n=await fetch("/ai-instruct.txt");if(!n.ok)throw new Error("Failed to load system prompt");const r=await n.text();Ye.setSystemPrompt(r),t(i=>({...i,systemPrompt:r}))}catch(n){console.error("Failed to load system prompt:",n),t(r=>({...r,error:"Failed to load AI instructions"}))}},async sendMessage(n){if(n.trim()){t(r=>({...r,isProcessing:!0,error:null}));try{const r=await Ye.getResponse(n);t(s=>({...s,messages:Ye.getChatHistory(),isProcessing:!1})),r.imageUrl&&Ke.setImage(r.imageUrl),await this.executeCommands(r.commands),!(r.commands.includes("shutup")||r.commands.includes("stop_speaking"))&&r.text&&Q.speak(r.text)}catch(r){console.error("Chat error:",r),t(i=>({...i,isProcessing:!1,error:r instanceof Error?r.message:"Failed to get AI response"}))}}},async executeCommands(n){for(const r of n)switch(r){case"mute_microphone":Q.mute();break;case"unmute_microphone":await Q.unmute();break;case"stop_speaking":case"shutup":Q.stopSpeaking();break;case"open_image":Ke.openInNewTab();break;case"save_image":await Ke.saveImage();break;case"copy_image":await Ke.copyToClipboard();break;case"set_model_flux":this.setImageModel("flux");break;case"set_model_turbo":this.setImageModel("turbo");break;case"set_model_kontext":this.setImageModel("kontext");break;case"clear_chat_history":this.clearHistory();break;case"theme_light":document.body.setAttribute("data-theme","light");break;case"theme_dark":document.body.setAttribute("data-theme","dark");break}},setImageModel(n){Ye.setImageModel(n),t(r=>({...r,currentModel:n}))},clearHistory(){Ye.clearChatHistory(),t(n=>({...n,messages:[]}))},clearError(){t(n=>({...n,error:null}))}}}const hn=Fi();var Ni=G('<article><div class="pulse-ring svelte-ggber2"></div> <span class="sr-only svelte-ggber2"> </span></article>');function pn(e,t){qe(t,!1);const n=K(),r=K();let i=Ue(t,"role",8,"user"),s=Ue(t,"speaking",8,!1),a=Ue(t,"listening",8,!1),l=Ue(t,"error",8,!1),c=Ue(t,"label",8,"");ye(()=>(Pe(l()),Pe(s()),Pe(a())),()=>{A(n,l()?"error":s()?"speaking":a()?"listening":"idle")}),ye(()=>(Pe(c()),Pe(i()),g(n)),()=>{A(r,c()||(i()==="ai"?"Unity":"You")+" - "+g(n))}),st();var o=Ni();let u;var p=O(E(o),2),f=E(p);ae(()=>{u=Jn(o,1,`voice-circle ${i()??""}`,"svelte-ggber2",u,{speaking:s(),listening:a(),error:l()}),j(o,"data-role",i()),j(o,"data-state",g(n)),j(o,"aria-label",g(r)),ge(f,i()==="ai"?"Unity":"You")}),M(e,o),Ve()}var Di=G('<img id="hero-image" alt="AI generated visualization" loading="lazy" decoding="async" crossorigin="anonymous" class="svelte-1679h7l"/>'),$i=G('<div class="loading-indicator svelte-1679h7l"><div class="spinner svelte-1679h7l"></div> <p>Generating image...</p></div>'),zi=G('<div class="error-message svelte-1679h7l"> </div>'),Hi=G('<figure id="hero-stage"><!> <!> <!></figure>');function ji(e,t){qe(t,!1);const n=()=>nt(Ke,"$imageStore",r),[r,i]=xt(),s=K(),a=K();ye(()=>n(),()=>{A(s,!!n().currentImageUrl)}),ye(()=>n(),()=>{A(a,n().isLoading)}),st(),at();var l=Hi();let c;var o=E(l);{var u=v=>{var _=Di();ae(()=>j(_,"src",(n(),T(()=>n().currentImageUrl)))),M(v,_)};ie(o,v=>{n(),T(()=>n().currentImageUrl)&&v(u)})}var p=O(o,2);{var f=v=>{var _=$i();M(v,_)};ie(p,v=>{g(a)&&v(f)})}var h=O(p,2);{var d=v=>{var _=zi(),R=E(_);ae(()=>ge(R,(n(),T(()=>n().error)))),M(v,_)};ie(h,v=>{n(),T(()=>n().error)&&v(d)})}ae(()=>{c=Jn(l,1,"image-stage svelte-1679h7l",null,c,{loading:g(a)}),j(l,"data-state",g(s)?"loaded":"empty"),j(l,"aria-hidden",!g(s))}),M(e,l),Ve(),i()}var qi=G('<button id="mute-indicator" class="mute-indicator svelte-13c81ri" type="button"><span class="indicator-text svelte-13c81ri"> </span></button>');function Vi(e,t){qe(t,!1);const n=()=>nt(Q,"$voiceStore",r),[r,i]=xt(),s=K();function a(){Q.toggleMute()}ye(()=>n(),()=>{A(s,n().isMuted?"Tap or click anywhere to unmute":"Microphone active - listening")}),st(),at();var l=qi(),c=E(l),o=E(c);ae(()=>{j(l,"data-state",(n(),T(()=>n().isMuted?"muted":"unmuted"))),ge(o,g(s))}),tt("click",l,a),M(e,l),Ve(),i()}var Bi=G('<div class="transcript-display svelte-12j5tpu"><p class="svelte-12j5tpu"> </p></div>'),Wi=G('<div class="app-shell svelte-12j5tpu" role="button" tabindex="0"><header class="status-banner svelte-12j5tpu" role="status" aria-live="polite"><!></header> <main class="layout svelte-12j5tpu" aria-live="polite"><!> <section class="voice-stage svelte-12j5tpu" role="group" aria-label="Voice activity monitors"><!> <!></section> <!></main></div>');function Gi(e,t){qe(t,!1);const n=()=>nt(Q,"$voiceStore",r),[r,i]=xt();Zt(()=>(hn.loadSystemPrompt(),Q.initialize(),window.addEventListener("voice:transcript",s),()=>{window.removeEventListener("voice:transcript",s),Q.mute()}));async function s(m){const S=m.detail.transcript;S&&await hn.sendMessage(S)}function a(){n().isMuted&&Q.unmute()}function l(m){(m.key==="Enter"||m.key===" ")&&a()}at();var c=Wi(),o=E(c),u=E(o);Vi(u,{});var p=O(o,2),f=E(p);ji(f,{});var h=O(f,2),d=E(h);{let m=Ze(()=>n().isSpeaking?"speaking":"idle");pn(d,{role:"ai",get speaking(){return n().isSpeaking},get label(){return`Unity is ${g(m)??""}`}})}var v=O(d,2);{let m=Ze(()=>n().isListening?"listening":"muted");pn(v,{role:"user",get listening(){return n().isListening},get label(){return`Microphone is ${g(m)??""}`}})}var _=O(h,2);{var R=m=>{var y=Bi(),S=E(y),z=E(S);ae(()=>ge(z,n().currentTranscript)),M(m,y)};ie(_,m=>{n().currentTranscript&&m(R)})}tt("click",c,a),tt("keydown",c,l),M(e,c),Ve(),i()}var Yi=G(`<section id="landing" class="landing" aria-labelledby="landing-title"><div class="landing-grid"><div class="landing-hero surface-card accent-card"><span class="landing-badge">Unity voice lab check-in</span> <h1 id="landing-title">Let's make sure every light is green</h1> <p class="landing-lede">Before Unity can chat with you, we run a quick readiness scan on your browser. Think of it like making sure
            your helmet is on straight. When a light glows amber, read the friendly tip, fix it, then press "Check again."</p> <div class="landing-links"><a class="landing-link" href="https://unityailab.online" target="_blank" rel="noopener">Back to Unity AI Lab home</a> <a class="landing-link" href="https://github.com/Unity-Lab-AI/Talk-to-Unity" target="_blank" rel="noopener">View the project on GitHub</a></div></div> <!></div> <div class="landing-instructions surface-card" aria-labelledby="landing-how-to-title"><h2 id="landing-how-to-title">How to get every light to glow green</h2> <ol class="landing-steps"><li><strong>Stay on a secure connection.</strong> Always load <code>https://unityailab.com/Talk-to-Unity/</code> or run the site from <code>localhost</code> while developing. If you see <code>http://</code> in the address bar, add the missing "s" or jump back to the
            Unity AI Lab home page and enter from there.</li> <li><strong>Use a browser that can listen.</strong> We recommend the latest Chrome or Edge. Safari works on macOS.</li> <li><strong>Give Unity a voice and ears.</strong> Turn your speakers on, set your system output to the right device, and when the browser asks
            for microphone access, click <em>Allow</em>. You can also review these permissions via the lock icon near the URL bar.</li> <li><strong>Re-run the check.</strong> Once you've made changes, press "Check again." When every status reads "Ready," the "Talk to Unity" button
            will unlock and slide the live lab into view on this page.</li> <li><strong>Remember the unmute cue.</strong> When the lab loads, <em>Tap or click anywhere to unmute</em> so Unity can hear you and respond.</li></ol> <p>Need help? Refresh the page to start over, or read the tips above each alert. When everything looks good, we'll send you forward
          to the interactive Unity assistant.</p></div></section>`),Ki=G("<main><!></main>");function Xi(e,t){qe(t,!1);let n=K("landing");function r(){A(n,"running")}Zt(()=>{document.body.setAttribute("data-app-state",g(n))}),ye(()=>g(n),()=>{typeof document<"u"&&document.body.setAttribute("data-app-state",g(n))}),st(),at();var i=Ki(),s=E(i);{var a=c=>{var o=Yi(),u=E(o),p=O(E(u),2);bi(p,{onAllReady:r}),M(c,o)},l=c=>{Gi(c,{})};ie(s,c=>{g(n)==="landing"?c(a):c(l,!1)})}M(e,i),Ve()}new Xi({target:document.getElementById("app")});
